# 文件系统

执行下面的代码，创建指定的文件并写入内容。

```javascript
const fs = require('fs');
fs.writeFile('demo.txt', 'Hello Node.js!', (err) => {
	if (err) {
		return console.error(err);
	}
	console.log('File written successfully.');
});
```

执行下面的代码，同步写入文件。

```javascript
const fs = require('fs');
fs.writeFileSync('demo.txt', 'Hello Node.js!');
console.log('File written successfully.');
```

执行下面的代码，追加内容到指定的文件。

```javascript
const fs = require('fs');
fs.appendFile('demo.txt', 'Hello Node.js!\r\n', (err) => {
	if (err) {
		return console.error(err);
	}
	console.log('Text appended successfully.');
});
```

执行下面的代码，同步追加文件。

```javascript
const fs = require('fs');
fs.appendFileSync('demo.txt', 'Hello Node.js!\r\n');
console.log('Text appended successfully.');
```

也可以通过下面的方式来追加文件。

```javascript
const fs = require('fs');
fs.writeFile('demo.txt', 'Hello Node.js!\r\n', {flag: 'a'}, (err) => {
	if (err) {
		return console.error(err);
	}
	console.log('Text appended successfully.');
});
```

执行下面的代码，读取指定文件内容。

```javascript
const fs = require('fs');
fs.readFile('demo.txt', (err, data) => {
	if (err) {
		return console.error(err);
	}
	console.log(data.toString());
});
```

执行下面的代码，同步读取文件。

```javascript
const fs = require('fs');
let data = fs.readFileSync('demo.txt');
console.log(data.toString());
```

执行下面的代码，重命名或移动文件。

```javascript
const fs = require('fs');
fs.rename('demo.txt', 'example.txt', (err) => {
	if (err) {
		return console.error(err);
	}
	console.log('File renamed successfully.');
});
```

执行下面的代码，同步重命名或移动文件。

```javascript
const fs = require('fs');
fs.renameSync('demo.txt', 'example.txt');
console.log('File renamed successfully.');
```

执行下面的代码，删除指定的文件。

```javascript
const fs = require('fs');
fs.unlink('demo.txt', (err) => {
	if (err) {
		return console.error(err);
	}
	console.log('File deleted successfully.');
});
```

执行下面的代码，同步删除文件。

```javascript
const fs = require('fs');
fs.unlinkSync('demo.txt');
console.log('File deleted successfully.');
```

执行下面的代码，创建指定的目录。

```javascript
const fs = require('fs');
fs.mkdir('demo', (err) => {
	if (err) {
		return console.error(err);
	}
	console.log('Directory created successfully.');
});
```

执行下面的代码，同步创建目录。

```javascript
const fs = require('fs');
fs.mkdirSync('demo');
console.log('Directory created successfully.');
```

也可以递归创建指定的目录。

```javascript
const fs = require('fs');
fs.mkdir('a/b/c', {recursive: true}, (err) => {
	if (err) {
		return console.error(err);
	}
	console.log('Directory created successfully.');
});
```

执行下面的代码，读取指定目录内容。

```javascript
const fs = require('fs');
fs.readdir('demo', (err, files) => {
	if (err) {
		return console.error(err);
	}
	console.log(files);
});
```

执行下面的代码，同步读取目录。

```javascript
const fs = require('fs');
let files = fs.readdirSync('demo');
console.log(files);
```

执行下面的代码，删除指定的目录。

```javascript
const fs = require('fs');
fs.rmdir('demo', (err) => {
	if (err) {
		return console.error(err);
	}
	console.log('Directory removed successfully.');
});
```

执行下面的代码，同步删除目录。

```javascript
const fs = require('fs');
fs.rmdirSync('demo');
console.log('Directory removed successfully.');
```

也可以递归删除指定的目录。

```javascript
const fs = require('fs');
fs.rmdir('a', {recursive: true}, (err) => {
	if (err) {
		return console.error(err);
	}
	console.log('Directory removed successfully.');
});
```

执行下面的代码，检查指定的文件或目录是否存在。

```javascript
const fs = require('fs');
fs.access('demo.txt', (err) => {
	if (err) {
		console.log('File does not exist.');
	} else {
		console.log('File exists.');
	}
});
```

执行下面的代码，同步进行检查。

```javascript
const fs = require('fs');
try {
	fs.accessSync('demo.txt');
	console.log('File exists.');
} catch (err) {
	console.log('File does not exist.');
}
```

执行下面的代码，使用文件流写入文件。

```javascript
const fs = require('fs');
const ws = fs.createWriteStream('demo.txt');
ws.write('Hello Node.js!\r\n');
ws.write('Hello Node.js!\r\n');
ws.write('Hello Node.js!\r\n');
ws.end();
ws.on('finish', () => {
	console.log('All writes are now complete.');
});
ws.close();
```

执行下面的代码，使用文件流读取文件。

```javascript
const fs = require('fs');
const rs = fs.createReadStream('demo.txt');
rs.on('data', (chunk) => {
	console.log(chunk.toString());
});
rs.on('end', () => {
	console.log('No more data.');
});
```

